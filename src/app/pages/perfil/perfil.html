<app-main-layout>
  <app-texto-h1 [texto]="'Mi Perfil'"></app-texto-h1>
  <div class="perfil-main">
    <div class="info-usuario">
      <div class="columna-1">
        <img
          [src]="
            usuario?.fotoURL ||
            'https://upload.wikimedia.org/wikipedia/commons/a/ac/Default_pfp.jpg'
          "
          class="foto-perfil"
          (click)="activarEditarFoto()"
        />
        <div class="columna-texto">
          <!-- <div>
            <p>{{ usuario.proveedor }}</p>
          </div> -->
          <form class="flex flex-row gap-5 items-center flex-wrap">
            <div class="flex flex-col" *ngIf="editarFotoActivo">
              <label for="foto" class="text-[var(--color-bordes)]">Subir foto</label>
              <input
                type="file"
                id="foto"
                (change)="onImagenSeleccionada($event)"
                accept=".jpg, .jpeg, .png"
                class="rounded-[10px] border-1 border-[var(--color-bordes)] focus: outline-white focus:outline-1 !p-[10px] w-[250px]"
              />
            </div>

            <div class="flex flex-col">
              <label for="nombre" class="text-[var(--color-bordes)]">Nombre</label>
              <input
                type="text"
                class="rounded-[10px] border-1 border-[var(--color-bordes)] focus: outline-white focus:outline-1 !p-[10px] w-[250px]"
                value=""
                id="nombre"
                [formControl]="nombre"
                maxlength="15"
                minlength="4"
              />
            </div>

            <div *ngIf="nombre.invalid" class="text-red-500 font-bold">
              El nombre debe tener al menos 4 caracteres
            </div>
          </form>
          <p>Correo: {{ usuario.email }}</p>
        </div>
      </div>

      <div class="columna-2">
        <ul>
          <li class="cerebros" style="color: var(--color-rosa)">
            <img src="/img/brain-svgrepo-com.png" alt="" />
            {{ usuario?.cerebros }}
          </li>
          <li class="monedas" style="color: var(--color-amarillo)">
            <img src="/img/coin-svgrepo-com.png" alt="" /> {{ usuario?.monedas }}
          </li>
          <li class="vidas" style="color: var(--color-rojo)">
            <img src="/img/heart-suit-svgrepo-com.png" alt="" />{{ usuario?.vidas }}
          </li>
        </ul>
      </div>
    </div>

    <div class="flex flex-row align-middle gap-4 !mb-10">
      <app-boton-general [texto]="'Cerrar Sesión'" (click)="abrirModal()"></app-boton-general>
      <div *ngIf="(nombre.dirty || imagenSeleccionada != null) && nombre.valid">
        <app-boton-general [texto]="'Guardar Cambios'" [tipo]="'destacado'" (click)="guardarClick()"></app-boton-general>
      </div>
    </div>
  </div>

  <app-mensaje-alerta
    *ngIf="guardado"
    [mensaje]="'Perfil actualizado con éxito'"
    [tipo]="'exito'"
  ></app-mensaje-alerta>

  <div *ngIf="modalAbierto">
    <app-modal
      [titulo]="'¿Estás seguro de que quieres cerrar sesión?'"
      [btn1]="'Cancelar'"
      [btn2]="'Cerrar Sesión'"
      (click1)="cerrarModal()"
      (click2)="cerrarSesion()"
    ></app-modal>
  </div>
  <app-texto-h1 [texto]="'Estadísticas'"></app-texto-h1>
</app-main-layout>
